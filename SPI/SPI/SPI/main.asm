;
; SPI.asm
;
; Created: 10/05/2019 15:40:45
; Author : Jos√©
;
.include "m328pdef.inc"
.org 0x0000 JMP SETUP
.org 0x0022 JMP RECEIVE


SETUP:
 LDI R18,0B10000000
 OUT DDRD,R18
 LDI R16,0B00010000
 OUT DDRB,R16
 LDI R16,0B11010000
 OUT SPCR,R16
 
WAIT:
 RJMP WAIT

 RECEIVE:
 IN R17,SPDR
 CPI R17,0X80
 BREQ ON
 BRNE OFF
 RETI

 ON:
  LDI R18,0X80
  OUT PORTD,R18
  RETI

OFF:
  LDI R18,0X00
  OUT PORTD,R18
  RETI




